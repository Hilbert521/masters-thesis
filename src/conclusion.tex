\section{Conclusion}

In this thesis, we developed a hardware and software solution that allows execution of the model predictive controller onboard of micro aerial vehicles. The dynamical model of the helicopter was derived and its parameters were numerically and experimentally identified. We designed a system including the Kalman filter as the state estimator and the quadratic MPC which optimizes control actions over the prediction horizon of 2.2\jed{s}. The proposed system was successfully implemented into the embedded hardware. The controller was verified by simulation and tested in various experiments. Many experiments were conducted both indoors and outdoors to test different scenarios including tracking various trajectories and disturbance rejection. The entire assignment of this thesis has been fulfilled successfully. Following tasks has been completed:

\begin{itemize}
\item The dynamical system of the UAV was analyzed and its model was constructed.
\item A Kalman filter was implemented to estimate states and disturbances.
\item A model predictive controller was derived and implemented on the experimental micro aerial vehicle.
\item The experimental aircraft was constructed including the custom control board, which was designed and manufactured for purpose of this thesis.
\item Experiments were conducted that verified capabilities of the solution to follow dynamical trajectories in indoor and outdoor environment.
\end{itemize}

This work created opportunities for other students to work on their theses \citep{klucka2015, fiedler2015}. One aimed to control a group of UAVs synchronously using the XBee modules, another developed a user interface for the ground station and dealt with a failure detection system based on the proposed estimator. The platform will continue to be used for a research of UAV swarms and formations within Multi-Robot System group of FEE CTU.

The experimental platform was used during research of a visual feature tracking system \citep{chudoba2014surf}. The results with multirobotic formations were also published in \citep{saska_baca2014}. The last results were submitted to Autonomous Robots journal and are expected to come out in 2015 \citep{saska2015submitted}. 

\subsection{Future work}

During the development of this thesis, several ideas and needs emerged that specify our future work. Since the bottleneck of the system is its dependence on sensor data, additional onboard sensors should be mounted to increase the precision and robustness of estimated position. Barometer and magnetometer could be added to the custom control board and their data fused by the Kalman filter. The IMU, which is already present in the stabilization board, could be also used for the position estimation.

Regarding controllers, the MPC shall be implemented to control also the altitude, although there is not such need for precise trajectory tracking. Furthermore, an additional MPC could be added to allow optimal onboard trajectory planning. It would require to solve an optimization problem with more complex constraints. 
